#N canvas 105 26 776 560 10;
#N canvas 747 191 408 528 tables 0;
#X msg 259 48 arrayviewlistnew;
#X msg 257 190 arrayviewlistnew;
#X msg 251 437 arrayviewlistnew;
#X obj 251 464 s \$0-impulse-response;
#X obj 257 216 s \$0-invchirp;
#X obj 259 75 s \$0-chirp;
#X msg 259 318 arrayviewlistnew;
#X obj 259 345 s \$0-chirp-response;
#N canvas 0 22 450 300 (subpatch) 0;
#X array \$0-chirp 880131 float 2;
#X coords 0 1 880131 -1 200 100 1;
#X restore 27 28 graph;
#N canvas 0 22 450 300 (subpatch) 0;
#X array \$0-invchirp 880131 float 2;
#X coords 0 7 880131 -7 200 100 1;
#X restore 27 155 graph;
#N canvas 0 22 450 300 (subpatch) 0;
#X array \$0-impulse-response 2 float 2;
#X coords 0 1 2 -1 200 100 1;
#X restore 28 410 graph;
#N canvas 0 22 450 300 (subpatch) 0;
#X array \$0-chirp-response 3470 float 2;
#X coords 0 1 3470 -1 200 100 1;
#X restore 27 283 graph;
#X connect 0 0 5 0;
#X connect 1 0 4 0;
#X connect 2 0 3 0;
#X connect 6 0 7 0;
#X restore 670 77 pd tables;
#X obj 200 99 hsl 115 15 0 20 0 0 empty empty computation 20 8 0 10
-228856 -258113 -1 0 1;
#X obj 39 13 bng 50 250 50 0 empty empty 1 18 25 0 20 -203904 -262144
-1;
#N canvas 542 274 549 463 IRmonitor 0;
#X obj 32 232 t f f;
#X obj 32 418 tabwrite \$0-IRmonitor;
#X obj 352 364 s \$0-IRmonitor;
#X msg 352 248 resize \$1;
#X obj 32 208 for++ 0 16000;
#X obj 32 286 +;
#X floatatom 262 251 8 0 0 0 - - -;
#X obj 32 151 t b f;
#X obj 32 312 tabread4 \$0-impulse-response;
#X msg 371 305 arrayviewlistnew;
#X obj 69 179 - 1;
#X floatatom 71 128 8 0 0 0 - - -;
#X obj 262 220 +;
#N canvas 351 22 367 535 vzoom 0;
#X obj 42 18 r \$0-log-vzoom;
#X obj 42 143 t b f;
#X obj 42 198 pow;
#X floatatom 92 227 8 0 0 0 - - -;
#X obj 258 215 makesymbol;
#X obj 258 272 s \$0-vzoom-label;
#X obj 42 68 5;
#X obj 42 42 t b f;
#X obj 42 94 -;
#X obj 42 118 abs;
#X obj 111 381 * -1;
#X obj 42 446 pack 0 0 0 0;
#X msg 42 473 bounds \$1 \$2 \$3 \$4;
#X obj 42 350 t b f f;
#X obj 42 301 f 1;
#X obj 42 325 /;
#X obj 42 278 t b f;
#X obj 42 503 s \$0-IRmonitor;
#X obj 88 413 r \$0-IRmonitor-size;
#X obj 203 340 s \$0-vplus;
#X obj 170 372 s \$0-vminus;
#X obj 203 263 1;
#X obj 203 238 t b f;
#X obj 203 290 /;
#X floatatom 213 316 8 0 0 0 - - -;
#X obj 170 339 * -1;
#X obj 69 254 s \$0-zoomfactor;
#X obj 42 227 t b f;
#X obj 186 505 outlet;
#X msg 258 241 label \$1x;
#X obj 42 171 5;
#X connect 0 0 7 0;
#X connect 1 0 30 0;
#X connect 1 1 2 1;
#X connect 2 0 3 0;
#X connect 2 0 4 0;
#X connect 2 0 22 0;
#X connect 2 0 27 0;
#X connect 4 0 29 0;
#X connect 6 0 8 0;
#X connect 7 0 6 0;
#X connect 7 1 8 1;
#X connect 8 0 9 0;
#X connect 9 0 1 0;
#X connect 10 0 11 3;
#X connect 11 0 12 0;
#X connect 12 0 17 0;
#X connect 13 0 11 0;
#X connect 13 1 11 1;
#X connect 13 2 10 0;
#X connect 14 0 15 0;
#X connect 15 0 13 0;
#X connect 16 0 14 0;
#X connect 16 1 15 1;
#X connect 18 0 11 2;
#X connect 21 0 23 0;
#X connect 22 0 21 0;
#X connect 22 1 23 1;
#X connect 23 0 24 0;
#X connect 23 0 19 0;
#X connect 23 0 25 0;
#X connect 25 0 20 0;
#X connect 27 0 28 0;
#X connect 27 1 26 0;
#X connect 29 0 5 0;
#X connect 30 0 2 0;
#X restore 65 58 pd vzoom;
#N canvas 0 22 294 301 hzoom 0;
#X obj 35 118 pow;
#X obj 35 70 t b f;
#X obj 35 95 f 2;
#X obj 35 47 + 5;
#X floatatom 53 143 8 0 0 0 - - -;
#X obj 35 253 s \$0-IRmonitor-size-label;
#X obj 35 196 makesymbol;
#X obj 35 16 r \$0-log-IRmonitor-size;
#X obj 45 170 s \$0-IRmonitor-size;
#X msg 35 224 label hzoom:\$1samples;
#X connect 0 0 4 0;
#X connect 0 0 6 0;
#X connect 0 0 8 0;
#X connect 1 0 2 0;
#X connect 1 1 0 1;
#X connect 2 0 0 0;
#X connect 3 0 1 0;
#X connect 6 0 9 0;
#X connect 7 0 3 0;
#X connect 9 0 5 0;
#X restore 373 20 pd hzoom;
#X obj 32 10 r \$0-IRmonitor-size;
#X obj 235 13 r \$0-IRcentering;
#X obj 32 128 f;
#X obj 278 40 tgl 15 0 empty empty empty 17 7 0 10 -262144 -1 -1 0
1;
#X floatatom 290 223 8 0 0 0 - - -;
#X floatatom 325 143 5 0 0 0 - - -;
#X obj 235 40 t b f;
#X floatatom 291 167 5 0 0 0 - - -;
#X obj 262 92 sel 0 1;
#X obj 291 117 f;
#X obj 291 143 / -2;
#X obj 262 70 f;
#X obj 32 97 t f b f;
#X obj 277 189 r \$0-chirpsize;
#X obj 32 392 clip -1 1;
#X obj 32 363 * 1;
#X obj 47 338 r \$0-zoomfactor;
#X floatatom 61 364 8 0 0 0 - - -;
#X obj 32 75 f;
#X obj 327 419 table \$0-trimmed-IR;
#X obj 173 418 tabwrite \$0-trimmed-IR;
#X obj 360 339 s \$0-trimmed-IR;
#X obj 371 277 r \$0-viewlist-trimmed-IR;
#X msg 262 144 0;
#X msg 227 277 arrayviewclose;
#X obj 49 33 r \$0-shift-IRmonitor;
#N canvas 786 364 330 331 inc-dec 0;
#X obj 26 19 inlet;
#X obj 26 293 outlet;
#X obj 67 162 +;
#X floatatom 67 190 5 0 0 0 - - -;
#X obj 26 262 +;
#X obj 67 19 r \$0-inc;
#X obj 127 18 r \$0-dec;
#X obj 67 262 s \$0-shift-IRmonitor;
#X obj 67 219 t b b f;
#X msg 127 173 0;
#X text 159 172 reset;
#X obj 67 85 f;
#X obj 127 84 f;
#X obj 77 41 bng 15 250 50 0 empty empty empty 17 7 0 10 -262144 -1
-1;
#X obj 137 45 bng 15 250 50 0 empty empty empty 17 7 0 10 -262144 -1
-1;
#X floatatom 75 114 5 0 0 0 - - -;
#X floatatom 127 112 5 0 0 0 - - -;
#X obj 82 61 * -1;
#X obj 195 19 r \$0-IRmonitor-size;
#X floatatom 195 73 5 0 0 0 - - -;
#X obj 195 44 / 32;
#X obj 127 138 r \$0-IR-done;
#X connect 0 0 4 0;
#X connect 2 0 3 0;
#X connect 3 0 2 1;
#X connect 3 0 8 0;
#X connect 4 0 1 0;
#X connect 5 0 11 0;
#X connect 5 0 13 0;
#X connect 6 0 12 0;
#X connect 6 0 14 0;
#X connect 8 0 7 0;
#X connect 8 1 4 0;
#X connect 8 2 4 1;
#X connect 9 0 3 0;
#X connect 11 0 2 0;
#X connect 11 0 15 0;
#X connect 12 0 16 0;
#X connect 12 0 2 0;
#X connect 17 0 11 1;
#X connect 18 0 20 0;
#X connect 20 0 19 0;
#X connect 20 0 17 0;
#X connect 20 0 12 1;
#X connect 21 0 9 0;
#X restore 47 263 pd inc-dec;
#N canvas 874 206 228 277 inc-dec-old 0;
#X obj 26 19 inlet;
#X obj 26 231 outlet;
#X msg 127 48 1;
#X msg 67 49 -1;
#X obj 67 100 +;
#X floatatom 67 128 5 0 0 0 - - -;
#X obj 26 200 +;
#X obj 67 19 r \$0-inc;
#X obj 127 18 r \$0-dec;
#X obj 67 200 s \$0-shift-IRmonitor;
#X obj 67 157 t b b f;
#X obj 127 76 r \$0-IR-done;
#X msg 127 111 0;
#X text 159 112 reset;
#X connect 0 0 6 0;
#X connect 2 0 4 0;
#X connect 3 0 4 0;
#X connect 4 0 5 0;
#X connect 5 0 4 1;
#X connect 5 0 10 0;
#X connect 6 0 1 0;
#X connect 7 0 3 0;
#X connect 8 0 2 0;
#X connect 10 0 9 0;
#X connect 10 1 6 0;
#X connect 10 2 6 1;
#X connect 11 0 12 0;
#X connect 12 0 5 0;
#X restore 413 113 pd inc-dec-old;
#X connect 0 0 5 0;
#X connect 0 1 1 1;
#X connect 0 1 35 1;
#X connect 3 0 2 0;
#X connect 3 0 36 0;
#X connect 4 0 0 0;
#X connect 5 0 8 0;
#X connect 7 0 4 0;
#X connect 7 1 3 0;
#X connect 7 1 10 0;
#X connect 8 0 35 0;
#X connect 8 0 30 0;
#X connect 9 0 36 0;
#X connect 10 0 4 1;
#X connect 12 0 6 0;
#X connect 12 0 41 0;
#X connect 13 0 33 0;
#X connect 15 0 33 0;
#X connect 16 0 18 0;
#X connect 16 0 21 0;
#X connect 17 0 7 0;
#X connect 21 0 17 0;
#X connect 21 1 26 0;
#X connect 21 1 39 0;
#X connect 23 0 38 0;
#X connect 23 1 24 0;
#X connect 24 0 20 0;
#X connect 24 0 25 0;
#X connect 25 0 12 0;
#X connect 25 0 22 0;
#X connect 26 0 23 0;
#X connect 27 0 17 0;
#X connect 27 1 26 0;
#X connect 27 1 39 0;
#X connect 27 2 24 1;
#X connect 27 2 11 0;
#X connect 28 0 12 1;
#X connect 28 0 19 0;
#X connect 29 0 1 0;
#X connect 30 0 29 0;
#X connect 31 0 30 1;
#X connect 31 0 32 0;
#X connect 33 0 27 0;
#X connect 37 0 9 0;
#X connect 38 0 12 0;
#X connect 39 0 36 0;
#X connect 39 0 2 0;
#X connect 40 0 33 0;
#X connect 41 0 5 1;
#X restore 670 105 pd IRmonitor;
#X obj 39 508 hradio 30 1 1 13 \$0-log-IRmonitor-size \$0-IRmonitor-size-label
hzoom:131072samples 0 -10 0 10 -203904 -260097 -1 12;
#X obj 670 256 vradio 30 1 1 6 \$0-log-vzoom \$0-vzoom-label 625x 0
-8 0 10 -203904 -260097 -1 1;
#X text 667 221 vzoom:;
#X obj 577 507 tgl 30 1 \$0-IRcentering empty empty 28 12 0 10 -203904
-1 -1 0 1;
#X obj 644 508 bng 30 250 50 0 \$0-viewlist-trimmed-IR empty empty
17 7 0 10 -203904 -260097 -1;
#X text 641 487 list;
#X floatatom 564 121 12 0 0 0 - #0-chirpseconds -;
#X symbolatom 40 162 40 0 0 0 - #0-chirpname -;
#X obj 458 508 bng 30 250 50 0 \$0-dec empty < 7 15 1 25 -203904 -260097
-1;
#X obj 511 508 bng 30 250 50 0 \$0-inc empty > 9 15 1 25 -203904 -260097
-1;
#X obj 197 14 bng 50 250 50 0 empty empty 2 18 25 0 20 -203904 -262144
-1;
#X obj 369 14 bng 50 250 50 0 empty empty 3 18 25 0 20 -203904 -262144
-1;
#X obj 530 14 bng 50 250 50 0 empty empty 4 18 25 0 20 -203904 -262144
-1;
#N canvas 523 114 704 565 spectrum 0;
#X obj 59 101 inlet;
#N canvas 133 42 934 546 compute-spectral-data 0;
#X obj 105 117 switch~;
#X msg 105 91 set \$1;
#X obj 40 142 tabplay~ \$0-trimmed-IR;
#X obj 20 278 tabwrite~ \$0-IR-magnitude-spectrum;
#X obj 40 172 fft~;
#N canvas 27 408 454 232 phase 0;
#X obj 27 15 inlet~;
#X obj 78 16 inlet~;
#X obj 78 148 atan2~;
#X obj 78 187 outlet~;
#X obj 126 54 count~;
#X obj 175 15 r \$0-IRmonitor-size;
#X obj 126 16 inlet;
#X floatatom 175 55 8 0 0 0 - - -;
#X obj 78 117 *~;
#X obj 111 117 *~;
#X obj 303 52 r \$0-phase-alternator;
#X obj 126 79 expr~ if($f2 \, pow(-1 \, $v1) \, 1);
#X floatatom 319 80 5 0 0 0 - - -;
#X connect 0 0 9 0;
#X connect 1 0 8 0;
#X connect 2 0 3 0;
#X connect 4 0 11 0;
#X connect 5 0 7 0;
#X connect 5 0 4 1;
#X connect 6 0 4 0;
#X connect 8 0 2 0;
#X connect 9 0 2 1;
#X connect 10 0 11 1;
#X connect 10 0 12 0;
#X connect 11 0 8 1;
#X connect 11 0 9 1;
#X restore 104 211 pd phase;
#X obj 104 246 tabwrite~ \$0-IR-phase-spectrum;
#X obj 105 63 r \$0-IRmonitor-size;
#X obj 749 245 r \$0-IRmonitor-size;
#X obj 763 326 s \$0-IR-magnitude-spectrum;
#X obj 749 353 s \$0-IR-phase-spectrum;
#X floatatom 759 68 8 0 0 0 - - -;
#X obj 169 174 s \$0-spectrum-done;
#X obj 750 198 s \$0-magnitudes-high;
#X obj 762 174 s \$0-magnitudes-low;
#X obj 773 121 s \$0-phases-low;
#X obj 772 145 s \$0-phases-high;
#X floatatom 759 270 8 0 0 0 - - -;
#X obj 307 206 tabread \$0-IR-magnitude-spectrum;
#X obj 307 155 t f f;
#X obj 307 126 for++;
#X obj 750 12 r \$0-IRmonitor-size;
#X obj 320 47 r \$0-IRmonitor-size;
#X obj 320 98 - 1;
#X obj 307 22 r \$0-spectrum-done;
#X obj 267 41 bng 30 250 50 0 empty empty empty 17 7 0 10 -262144 -260097
-1;
#X floatatom 347 127 8 0 0 0 - - -;
#X obj 307 232 tabwrite \$0-magnitudes-low;
#X obj 528 220 tabread \$0-IR-magnitude-spectrum;
#X obj 528 169 t f f;
#X obj 528 195 +;
#X obj 528 140 for++;
#X obj 572 33 r \$0-IRmonitor-size;
#X obj 541 113 - 1;
#X obj 528 11 r \$0-spectrum-done;
#X floatatom 599 141 8 0 0 0 - - -;
#X obj 572 85 / 2;
#X obj 572 58 t f f;
#X obj 572 113 -;
#X obj 490 71 bng 30 250 50 0 empty empty empty 17 7 0 10 -262144 -260097
-1;
#X obj 528 246 tabwrite \$0-magnitudes-high;
#X msg 749 295 arrayviewclose \, resize \$1;
#X msg 750 92 arrayviewclose \, resize \$1;
#X obj 307 393 t f f;
#X obj 307 364 for++;
#X obj 320 285 r \$0-IRmonitor-size;
#X obj 320 336 - 1;
#X obj 307 260 r \$0-spectrum-done;
#X obj 267 279 bng 30 250 50 0 empty empty empty 17 7 0 10 -262144
-260097 -1;
#X floatatom 347 365 8 0 0 0 - - -;
#X obj 307 445 tabread \$0-IR-phase-spectrum;
#X obj 307 470 tabwrite \$0-phases-low;
#X obj 528 433 t f f;
#X obj 528 459 +;
#X obj 528 404 for++;
#X obj 572 297 r \$0-IRmonitor-size;
#X obj 541 377 - 1;
#X obj 528 275 r \$0-spectrum-done;
#X floatatom 610 399 8 0 0 0 - - -;
#X obj 572 349 / 2;
#X obj 572 322 t f f;
#X obj 572 377 -;
#X obj 490 335 bng 30 250 50 0 empty empty empty 17 7 0 10 -262144
-260097 -1;
#X obj 528 484 tabread \$0-IR-phase-spectrum;
#X obj 528 510 tabwrite \$0-phases-high;
#X obj 572 405 + 1;
#X obj 572 140 + 1;
#X obj 320 73 / 64;
#X obj 320 311 / 64;
#X obj 599 85 / 64;
#X obj 599 349 / 64;
#X obj 750 41 / 64;
#N canvas 0 22 228 202 pyth~ 0;
#X obj 35 25 inlet~;
#X obj 98 25 inlet~;
#X obj 35 69 *~;
#X obj 98 69 *~;
#X obj 35 129 sqrt~;
#X obj 35 100 +~;
#X obj 35 163 outlet~;
#X connect 0 0 2 0;
#X connect 0 0 2 1;
#X connect 1 0 3 0;
#X connect 1 0 3 1;
#X connect 2 0 5 0;
#X connect 3 0 5 1;
#X connect 4 0 6 0;
#X connect 5 0 4 0;
#X restore 40 209 pd pyth~;
#X obj 63 8 r \$0-phase-alternator;
#X obj 20 75 bang;
#X obj 19 8 inlet;
#X obj 63 31 delay 20;
#X connect 1 0 0 0;
#X connect 2 0 4 0;
#X connect 2 1 12 0;
#X connect 4 0 5 0;
#X connect 4 0 72 0;
#X connect 4 1 5 1;
#X connect 4 1 72 1;
#X connect 5 0 6 0;
#X connect 7 0 1 0;
#X connect 8 0 17 0;
#X connect 8 0 41 0;
#X connect 18 0 27 0;
#X connect 19 0 18 0;
#X connect 19 1 27 1;
#X connect 20 0 19 0;
#X connect 21 0 71 0;
#X connect 22 0 67 0;
#X connect 23 0 20 1;
#X connect 23 0 26 0;
#X connect 24 0 20 0;
#X connect 25 0 20 0;
#X connect 28 0 40 0;
#X connect 29 0 30 0;
#X connect 29 1 40 1;
#X connect 30 0 28 0;
#X connect 31 0 29 0;
#X connect 32 0 37 0;
#X connect 33 0 31 1;
#X connect 34 0 31 0;
#X connect 36 0 38 0;
#X connect 37 0 36 0;
#X connect 37 1 69 0;
#X connect 38 0 35 0;
#X connect 38 0 66 0;
#X connect 39 0 31 0;
#X connect 41 0 9 0;
#X connect 41 0 10 0;
#X connect 42 0 13 0;
#X connect 42 0 14 0;
#X connect 42 0 15 0;
#X connect 42 0 16 0;
#X connect 43 0 50 0;
#X connect 43 1 51 1;
#X connect 44 0 43 0;
#X connect 45 0 68 0;
#X connect 46 0 44 1;
#X connect 46 0 49 0;
#X connect 47 0 44 0;
#X connect 48 0 44 0;
#X connect 50 0 51 0;
#X connect 52 0 53 0;
#X connect 52 1 64 1;
#X connect 53 0 63 0;
#X connect 54 0 52 0;
#X connect 55 0 60 0;
#X connect 56 0 54 1;
#X connect 57 0 54 0;
#X connect 59 0 61 0;
#X connect 60 0 59 0;
#X connect 60 1 70 0;
#X connect 61 0 58 0;
#X connect 61 0 65 0;
#X connect 62 0 54 0;
#X connect 63 0 64 0;
#X connect 65 0 53 1;
#X connect 66 0 30 1;
#X connect 67 0 23 0;
#X connect 68 0 46 0;
#X connect 69 0 33 0;
#X connect 69 0 38 1;
#X connect 70 0 56 0;
#X connect 70 0 61 1;
#X connect 71 0 11 0;
#X connect 71 0 42 0;
#X connect 72 0 3 0;
#X connect 73 0 76 0;
#X connect 74 0 0 0;
#X connect 74 0 2 0;
#X connect 74 0 3 0;
#X connect 74 0 6 0;
#X connect 74 0 5 2;
#X connect 75 0 74 0;
#X connect 76 0 74 0;
#X restore 59 77 pd compute-spectral-data;
#N canvas 0 22 450 300 (subpatch) 0;
#X array \$0-IR-phase-spectrum 131072 float 0;
#X coords 0 3.17 131071 -3.17 200 140 1;
#X restore 58 401 graph;
#N canvas 0 22 450 300 (subpatch) 0;
#X array \$0-phases-low 2048 float 0;
#X coords 0 3.17 2047 -3.17 200 140 1;
#X restore 270 401 graph;
#N canvas 0 22 450 300 (subpatch) 0;
#X array \$0-phases-high 2048 float 0;
#X coords 0 3.17 2047 -3.17 200 140 1;
#X restore 481 401 graph;
#X text 33 249 1;
#X text 32 461 0;
#X text 68 362 full complex spectrum;
#X text 115 29 (re)compute spectral data;
#X obj 303 130 s \$0-IR-magnitude-spectrum;
#X obj 312 102 s \$0-IR-phase-spectrum;
#X msg 303 77 arrayviewlistnew;
#X text 364 30 view lists;
#X obj 59 257 cnv 15 620 94 empty empty empty 20 12 0 14 -233017 -66577
0;
#X text 34 340 0;
#X text 30 394 pi;
#X text 29 528 -pi;
#N canvas 0 22 450 300 (subpatch) 0;
#X array \$0-IR-magnitude-spectrum 131072 float 0;
#X coords 0 1.5 131071 0 200 140 1;
#X restore 59 211 graph;
#N canvas 0 22 450 300 (subpatch) 0;
#X array \$0-magnitudes-low 2048 float 0;
#X coords 0 1.5 2047 0 200 140 1;
#X restore 270 211 graph;
#N canvas 0 22 450 300 (subpatch) 0;
#X array \$0-magnitudes-high 2048 float 0;
#X coords 0 1.5 2047 0 200 140 1;
#X restore 480 211 graph;
#X text 58 167 all scales linear;
#X text 268 167 << frequencies >>;
#X text 22 290 magn.;
#X text 284 361 lowest 1/64 of spectrum;
#X text 495 358 high 1/64 just before Nyquist;
#X obj 59 16 bng 50 250 50 0 empty empty 1 17 25 0 25 -203904 -262144
-1;
#X obj 303 16 bng 50 250 50 0 empty empty 2 17 25 0 25 -203904 -262144
-1;
#X symbolatom 497 168 30 0 0 0 - #0-chirpname -;
#X text 449 167 chirp:;
#X msg 59 124 \; pd-spectrum vis 1;
#X obj 507 80 s \$0-phase-alternator;
#X obj 507 17 tgl 50 1 empty empty empty 17 7 0 10 -203904 -262144
-1 1 1;
#X text 505 103 alternate phases;
#X connect 0 0 29 0;
#X connect 0 0 1 0;
#X connect 11 0 9 0;
#X connect 11 0 10 0;
#X connect 25 0 1 0;
#X connect 26 0 11 0;
#X connect 31 0 30 0;
#X restore 369 75 pd spectrum;
#X obj 36 119 cnv 15 15 15 empty empty IRrecorder 2 14 0 25 -262144
-66577 0;
#X symbolatom 564 145 12 0 0 0 - #0-fade-in-symbol -;
#X text 514 145 fade-in;
#X obj 338 186 cnv 2 2 300 empty empty empty 20 12 0 14 -233017 -66577
0;
#N canvas 0 22 450 300 (subpatch) 0;
#X array \$0-IRmonitor 131072 float 2;
#X coords 0 1 131072 -1 600 280 1;
#X restore 39 195 graph;
#X text 585 13 save IR;
#N canvas 0 22 321 293 save-IR 0;
#X obj 32 37 inlet;
#X obj 32 202 soundfiler;
#X obj 32 67 savepanel;
#X obj 77 120 f \$0;
#X obj 77 95 loadbang;
#X floatatom 52 231 8 0 0 0 - - -;
#X obj 57 95 bng 15 250 50 0 empty empty empty 17 7 0 10 -262144 -1
-1;
#X obj 32 145 pack s f;
#X floatatom 90 146 5 0 0 0 - - -;
#X msg 32 177 write -wave -bytes 4 \$1 \$2-impulse-response;
#X obj 32 262 outlet;
#X connect 0 0 2 0;
#X connect 1 0 5 0;
#X connect 1 0 10 0;
#X connect 2 0 7 0;
#X connect 3 0 7 1;
#X connect 3 0 8 0;
#X connect 4 0 3 0;
#X connect 6 0 3 0;
#X connect 7 0 9 0;
#X connect 9 0 1 0;
#X restore 530 76 pd save-IR;
#X obj 669 457 nbx 5 18 -1e+37 1e+37 0 0 empty \$0-vminus ---- -24
18 0 10 -228856 -1 -1 -0.0016 256;
#X obj 668 195 nbx 5 18 -1e+37 1e+37 0 0 empty \$0-vplus ---- -24 0
0 10 -228856 -1 -1 0.0016 256;
#X text 567 488 centered;
#X floatatom 564 169 12 0 0 0 - #0-startfrequency -;
#X text 467 168 start frequency;
#N canvas 43 285 363 378 impulse-response 0;
#X obj 19 -11 inlet;
#X obj 19 335 tabwrite~ \$0-impulse-response;
#X obj 34 307 /~ 1;
#X floatatom 69 307 10 0 0 0 - - -;
#N canvas 0 22 321 262 set-partconv~ 0;
#X obj 29 194 outlet;
#X obj 29 99 bng 30 250 50 0 empty empty empty 17 7 0 10 -262144 -260097
-1;
#X obj 29 139 f \$0;
#X obj 45 46 r \$0-inverse-done;
#X obj 29 74 pipe 100;
#X text 28 221 [partconv~] needs to reload table content;
#X obj 29 19 inlet;
#X msg 29 166 set \$1-invchirp 4096;
#X connect 1 0 2 0;
#X connect 2 0 7 0;
#X connect 3 0 4 0;
#X connect 4 0 1 0;
#X connect 6 0 4 0;
#X connect 7 0 0 0;
#X restore 58 207 pd set-partconv~;
#X obj 234 335 outlet;
#X obj 19 89 t b b b;
#X obj 19 136 delay 500;
#X obj 34 174 tabplay~ \$0-chirp-response;
#X obj 35 57 r \$0-convolve;
#X obj 55 283 / 2;
#X obj 55 260 r \$0-chirpsize;
#X msg 153 106 1;
#X obj 197 79 r \$0-IR-done;
#X msg 185 106 0;
#X obj 185 -2 loadbang;
#X obj 153 136 switch~ 8192;
#N canvas 605 370 263 319 computing 0;
#X obj 29 26 inlet;
#X obj 29 294 outlet;
#X obj 29 170 metro;
#X msg 96 108 0;
#X msg 29 78 1;
#X floatatom 127 30 8 0 0 0 - - -;
#X obj 96 85 pipe;
#X obj 29 146 tgl 15 0 empty empty empty 17 7 0 10 -262144 -1 -1 0
1;
#X obj 29 225 f;
#X obj 44 199 + 1;
#X obj 29 52 t b b;
#X msg 56 78 0;
#X floatatom 38 248 5 0 0 0 - - -;
#X floatatom 129 86 8 0 0 0 - - -;
#X floatatom 68 171 8 0 0 0 - - -;
#X obj 141 295 s \$0-IR-done;
#X obj 141 268 delay 500;
#N canvas 904 166 198 247 chirpmilliseconds 0;
#X obj 27 218 outlet;
#X obj 27 14 r \$0-chirpsize;
#X obj 60 82 samplerate~;
#X obj 60 38 loadbang;
#X obj 74 60 bng 15 250 50 0 empty empty empty 17 7 0 10 -262144 -1
-1;
#X obj 60 122 / 1000;
#X floatatom 72 151 8 0 0 0 - - -;
#X obj 27 151 / 44.1;
#X floatatom 42 187 8 0 0 0 - - -;
#X connect 1 0 7 0;
#X connect 2 0 5 0;
#X connect 3 0 2 0;
#X connect 4 0 2 0;
#X connect 5 0 6 0;
#X connect 5 0 7 1;
#X connect 7 0 8 0;
#X connect 7 0 0 0;
#X restore 117 5 pd chirpmilliseconds;
#X obj 117 55 * 2;
#X obj 56 144 / 20;
#X obj 141 242 sel 20;
#X connect 0 0 10 0;
#X connect 2 0 8 0;
#X connect 3 0 7 0;
#X connect 4 0 7 0;
#X connect 6 0 3 0;
#X connect 7 0 2 0;
#X connect 8 0 1 0;
#X connect 8 0 9 0;
#X connect 8 0 12 0;
#X connect 8 0 20 0;
#X connect 9 0 8 1;
#X connect 10 0 4 0;
#X connect 10 0 6 0;
#X connect 10 1 11 0;
#X connect 11 0 8 0;
#X connect 16 0 15 0;
#X connect 17 0 18 0;
#X connect 17 0 5 0;
#X connect 18 0 6 1;
#X connect 18 0 13 0;
#X connect 18 0 19 0;
#X connect 19 0 14 0;
#X connect 19 0 2 1;
#X connect 20 0 16 0;
#X restore 234 305 pd computing;
#X msg 35 21 \; pd-test-signal vis 0;
#X obj 100 86 print;
#X obj 34 233 bsaylor/partconv~ \$0-invchirp 8192;
#X connect 0 0 6 0;
#X connect 0 0 18 0;
#X connect 2 0 1 0;
#X connect 4 0 20 0;
#X connect 6 0 7 0;
#X connect 6 1 17 0;
#X connect 6 2 4 0;
#X connect 6 2 12 0;
#X connect 7 0 1 0;
#X connect 7 0 8 0;
#X connect 8 0 20 0;
#X connect 9 0 19 0;
#X connect 10 0 2 1;
#X connect 10 0 3 0;
#X connect 11 0 10 0;
#X connect 12 0 16 0;
#X connect 13 0 14 0;
#X connect 14 0 16 0;
#X connect 15 0 14 0;
#X connect 17 0 5 0;
#X connect 20 0 2 0;
#X restore 197 75 pd impulse-response;
#X text 253 28 impulse;
#X text 252 45 response;
#X text 253 10 compute;
#X text 96 28 test;
#X text 95 44 signal;
#X text 96 11 apply;
#X text 423 29 spectral;
#X text 423 50 data;
#X text 424 11 check;
#N canvas 116 102 803 550 test-signal 0;
#X obj 23 462 inlet;
#X obj 195 394 cyclone/Scope~ 267 132 2 3 128 -1 1 0 0 0 0 102 255
51 30 30 30 0;
#X obj 212 363 hsl 128 15 128 2 0 1 empty empty scope-refresh-rate
8 8 0 10 -203904 -260097 -1 12700 0;
#X msg 23 417 \; pd dsp 1 \;;
#X obj 23 390 loadbang;
#X obj 523 273 bng 50 250 50 0 \$0-load-chirp empty 6 17 25 0 25 -203904
-262144 -1;
#X symbolatom 523 359 30 0 0 0 - - -;
#X obj 523 390 bng 50 250 50 0 \$0-play-chirp empty 7 17 25 0 25 -203904
-262144 -1;
#X text 582 390 play chirp and record response;
#N canvas 863 393 315 362 load-chirp 0;
#X obj 28 13 inlet;
#N canvas 155 35 678 610 textfile-to-arrays 0;
#X obj 27 8 inlet;
#X obj 56 268 textfile;
#X msg 114 213 read \$1;
#X msg 54 63 clear;
#X msg 99 241 rewind;
#X obj 27 33 t b b;
#X text 100 62 1 - clear textbuffer;
#X text 167 213 3 - read textfile into buffer;
#X text 150 241 4 - go to top of file;
#X symbolatom 42 151 60 0 0 0 - - -;
#X floatatom 70 465 8 0 0 0 - - -;
#X floatatom 121 416 5 0 0 0 - - -;
#X text 193 438 6 - read nr of octaves;
#X obj 219 360 tabset \$0-chirp;
#X text 394 330 9 - write invchirp list into invchirp table;
#X obj 56 434 f;
#X obj 110 389 f;
#X obj 110 437 s \$0-octaves;
#X obj 69 493 s \$0-chirpsize;
#X obj 274 329 tabset \$0-invchirp;
#X obj 56 300 route chirpsize octaves fade-in chirp invchirp;
#X obj 165 355 f;
#X floatatom 172 378 5 0 0 0 - - -;
#N canvas 497 235 231 207 fade-in 0;
#X obj 29 23 inlet;
#X obj 29 74 sel 0 1;
#X obj 29 140 symbol;
#X msg 29 106 false;
#X msg 76 106 true;
#X obj 29 168 s \$0-fade-in-symbol;
#X obj 42 49 s \$0-fade-in;
#X connect 0 0 1 0;
#X connect 0 0 6 0;
#X connect 1 0 3 0;
#X connect 1 1 4 0;
#X connect 2 0 5 0;
#X connect 3 0 2 0;
#X connect 4 0 2 0;
#X restore 165 398 pd fade-in;
#X text 235 397 7 - read fade-in (0 or 1);
#X text 320 360 8 - write chirp list into chirp table;
#X text 128 466 5 - read chirpsize;
#X msg 56 520 resize \$1;
#X obj 56 573 s \$0-chirp;
#X obj 69 546 s \$0-invchirp;
#X obj 27 185 t b b b b b b s;
#N canvas 635 142 255 227 openpanel 0;
#X obj 25 18 inlet;
#X obj 25 45 ggee/getdir;
#X obj 25 73 hcs/split_path;
#X obj 55 141 hcs/split_path;
#X obj 136 173 s \$0-chirpname;
#X obj 25 110 openpanel;
#X obj 25 174 outlet;
#X connect 0 0 1 0;
#X connect 1 0 2 0;
#X connect 2 0 5 0;
#X connect 3 1 4 0;
#X connect 5 0 3 0;
#X connect 5 0 6 0;
#X restore 27 106 pd openpanel;
#X text 113 106 2 - open textfile with extension .xchirp;
#X connect 0 0 5 0;
#X connect 1 0 20 0;
#X connect 2 0 1 0;
#X connect 3 0 1 0;
#X connect 4 0 1 0;
#X connect 5 0 31 0;
#X connect 5 1 3 0;
#X connect 15 0 10 0;
#X connect 15 0 18 0;
#X connect 15 0 27 0;
#X connect 16 0 17 0;
#X connect 16 0 11 0;
#X connect 20 0 15 0;
#X connect 20 1 16 0;
#X connect 20 2 21 0;
#X connect 20 3 13 0;
#X connect 20 4 19 0;
#X connect 21 0 22 0;
#X connect 21 0 23 0;
#X connect 27 0 28 0;
#X connect 27 0 29 0;
#X connect 30 0 1 0;
#X connect 30 1 1 0;
#X connect 30 2 1 0;
#X connect 30 3 1 0;
#X connect 30 4 1 0;
#X connect 30 5 4 0;
#X connect 30 6 2 0;
#X connect 31 0 30 0;
#X connect 31 0 9 0;
#X restore 28 46 pd textfile-to-arrays;
#X obj 29 288 r \$0-chirpname;
#X obj 29 315 outlet;
#N canvas 0 22 205 208 chirp-seconds 0;
#X obj 78 86 samplerate~;
#X obj 78 42 loadbang;
#X obj 39 114 / 44100;
#X obj 51 140 s \$0-chirpseconds;
#X obj 89 65 bng 15 250 50 0 empty empty empty 17 7 0 10 -262144 -1
-1;
#X obj 39 20 r \$0-chirpsize;
#X obj 39 169 outlet;
#X connect 0 0 2 1;
#X connect 1 0 0 0;
#X connect 2 0 3 0;
#X connect 2 0 6 0;
#X connect 4 0 0 0;
#X connect 5 0 2 0;
#X restore 28 84 pd chirp-seconds;
#N canvas 0 22 199 411 extra-bufferlength 0;
#X obj 39 106 samplerate~;
#X obj 39 62 loadbang;
#X obj 50 85 bng 15 250 50 0 empty empty empty 17 7 0 10 -262144 -1
-1;
#X obj 24 14 r \$0-response-tail;
#X obj 24 129 *;
#X floatatom 64 288 8 0 0 0 - - -;
#X floatatom 39 40 8 0 0 0 - - -;
#X obj 37 155 r \$0-latency;
#X obj 37 252 t b f;
#X obj 37 228 * 2;
#X obj 52 180 loadbang;
#X msg 52 204 10000;
#X obj 24 287 +;
#X floatatom 48 318 8 0 0 0 - - -;
#X obj 40 342 s \$0-extra-bufferlength;
#X obj 24 370 outlet;
#X floatatom 51 129 8 0 0 0 - - -;
#X connect 0 0 4 1;
#X connect 0 0 16 0;
#X connect 1 0 0 0;
#X connect 2 0 0 0;
#X connect 3 0 4 0;
#X connect 3 0 6 0;
#X connect 4 0 12 0;
#X connect 7 0 9 0;
#X connect 8 0 12 0;
#X connect 8 1 5 0;
#X connect 8 1 12 1;
#X connect 9 0 8 0;
#X connect 10 0 11 0;
#X connect 11 0 9 0;
#X connect 12 0 13 0;
#X connect 12 0 14 0;
#X connect 12 0 15 0;
#X restore 30 161 pd extra-bufferlength;
#X floatatom 28 112 8 0 0 0 - - -;
#X text 84 113 sec;
#X floatatom 30 190 8 0 0 0 - - -;
#X text 85 190 samples;
#X text 170 159 latency \, reverb tail;
#N canvas 542 35 287 426 buffers-resize 0;
#X obj 38 30 r \$0-chirpsize;
#X floatatom 71 90 8 0 0 0 - - -;
#X obj 38 264 * 2;
#X obj 38 387 s \$0-impulse-response;
#X msg 38 362 resize \$1;
#X obj 50 335 s \$0-impulse-response-size;
#X floatatom 58 303 8 0 0 0 - - -;
#X obj 71 112 r \$0-extra-bufferlength;
#X obj 71 138 t b f;
#X obj 71 269 s \$0-chirp-response;
#X msg 71 239 resize \$1;
#X obj 85 214 s \$0-chirp-response-size;
#X obj 71 166 +;
#X floatatom 86 192 8 0 0 0 - - -;
#X obj 38 66 f;
#X msg 155 30 1;
#X text 186 31 reset;
#X connect 0 0 14 0;
#X connect 2 0 4 0;
#X connect 2 0 5 0;
#X connect 2 0 6 0;
#X connect 4 0 3 0;
#X connect 7 0 8 0;
#X connect 8 0 12 0;
#X connect 8 1 12 1;
#X connect 10 0 9 0;
#X connect 12 0 10 0;
#X connect 12 0 11 0;
#X connect 12 0 13 0;
#X connect 14 0 2 0;
#X connect 14 0 12 0;
#X connect 14 0 1 0;
#X connect 15 0 14 0;
#X restore 29 232 pd buffers-resize;
#N canvas 0 22 548 212 start-frequency 0;
#N canvas 541 190 272 315 startfrequency 0;
#X obj 26 273 outlet;
#X obj 26 188 samplerate~;
#X obj 53 158 pow;
#X obj 53 109 t b f;
#X msg 53 134 2;
#X obj 26 56 t b f;
#X obj 26 215 /;
#X floatatom 34 246 5 0 0 0 - - -;
#X obj 53 84 + 1;
#X obj 26 23 r \$0-octaves;
#X connect 1 0 6 0;
#X connect 2 0 6 1;
#X connect 3 0 4 0;
#X connect 3 1 2 1;
#X connect 4 0 2 0;
#X connect 5 0 1 0;
#X connect 5 1 8 0;
#X connect 6 0 7 0;
#X connect 6 0 0 0;
#X connect 8 0 3 0;
#X connect 9 0 5 0;
#X restore 61 29 pd startfrequency;
#X obj 61 181 s \$0-startfrequency;
#X obj 77 58 r \$0-fade-in;
#X obj 77 83 + 1;
#X obj 77 113 t b f;
#X obj 61 151 *;
#X floatatom 104 152 5 0 0 0 - - -;
#X text 182 24 The fade-in window is one octave long. The real start
frequency is a function of nominal start frequency and fade-in. With
fade-in true \, real start frequency is doubled respective to nominal
start frequency.;
#X connect 0 0 5 0;
#X connect 2 0 3 0;
#X connect 3 0 4 0;
#X connect 4 0 5 0;
#X connect 4 1 5 1;
#X connect 4 1 6 0;
#X connect 5 0 1 0;
#X restore 147 289 pd start-frequency;
#X connect 0 0 1 0;
#X connect 2 0 3 0;
#X connect 4 0 6 0;
#X connect 5 0 8 0;
#X restore 523 332 pd load-chirp;
#X obj 195 11 bng 50 250 50 0 empty empty 2 17 25 0 25 -203904 -262144
-1;
#X floatatom 195 98 5 0 0 0 - - -;
#N canvas 138 297 514 409 latency-meter 0;
#X obj 18 21 inlet;
#X obj 155 88 click~;
#X obj 155 133 dac~;
#X obj 363 144 table \$0-clicks 10000;
#X obj 208 134 tabwrite~ \$0-clicks;
#X obj 208 45 adc~;
#X msg 363 82 arrayviewlistnew;
#X obj 363 112 s \$0-clicks;
#X obj 63 133 delay 300;
#X obj 237 374 outlet;
#X obj 290 374 s \$0-latency;
#N canvas 0 22 502 353 olli~ 0;
#X obj 264 85 delay~ 1 1;
#X obj 264 56 inlet~;
#X obj 39 237 outlet~;
#X obj 264 239 outlet~;
#X text 40 25 Olli Niemitalo's quadrature transformer;
#X text 37 289 y[n]=b1*y[n-1]+b2*y[n-2]+a0*x[n]+a1*x[n-1]+a2*x[n-2]
;
#X text 36 270 Pd's biquad:;
#X obj 39 112 biquad~ 0 0.161758 0.161758 0 -1;
#X obj 39 141 biquad~ 0 0.733029 0.733029 0 -1;
#X obj 39 173 biquad~ 0 0.94535 0.94535 0 -1;
#X obj 264 112 biquad~ 0 0.479401 0.479401 0 -1;
#X obj 264 142 biquad~ 0 0.876218 0.876218 0 -1;
#X obj 264 174 biquad~ 0 0.976599 0.976599 0 -1;
#X obj 264 202 biquad~ 0 0.9975 0.9975 0 -1;
#X text 91 238 first phase;
#X text 320 238 second phase;
#X text 167 238 << 90 degree >>;
#X obj 39 200 biquad~ 0 0.990598 0.990598 0 -1;
#X connect 0 0 10 0;
#X connect 1 0 0 0;
#X connect 1 0 7 0;
#X connect 7 0 8 0;
#X connect 8 0 9 0;
#X connect 9 0 17 0;
#X connect 10 0 11 0;
#X connect 11 0 12 0;
#X connect 12 0 13 0;
#X connect 13 0 3 0;
#X connect 17 0 2 0;
#X restore 208 77 pd olli~;
#N canvas 0 22 192 215 pyth~ 0;
#X obj 30 24 inlet~;
#X obj 93 24 inlet~;
#X obj 30 68 *~;
#X obj 93 68 *~;
#X obj 30 128 sqrt~;
#X obj 30 99 +~;
#X obj 30 162 outlet~;
#X connect 0 0 2 0;
#X connect 0 0 2 1;
#X connect 1 0 3 0;
#X connect 1 0 3 1;
#X connect 2 0 5 0;
#X connect 3 0 5 1;
#X connect 4 0 6 0;
#X connect 5 0 4 0;
#X restore 208 105 pd pyth~;
#X obj 63 185 zexy/tabminmax \$0-clicks;
#X obj 73 155 bng 25 250 50 0 empty empty empty 17 7 0 10 -262144 -1
-1;
#X obj 204 211 unpack;
#X floatatom 204 238 5 0 0 0 - - -;
#X floatatom 247 238 5 0 0 0 - - -;
#N canvas 0 22 200 319 tabminmax-old 0;
#X obj 21 50 for++ 1 10000;
#X obj 21 103 tabread \$0-clicks;
#X obj 21 76 t f f;
#X floatatom 21 182 5 0 0 0 - - -;
#X obj 21 157 max;
#X msg 36 133 0;
#X obj 21 25 t b b;
#X obj 21 210 delta;
#X obj 21 237 > 0;
#X obj 21 289 f;
#X obj 21 263 sel 1;
#X connect 0 0 2 0;
#X connect 1 0 4 0;
#X connect 2 0 1 0;
#X connect 2 1 9 1;
#X connect 3 0 4 1;
#X connect 3 0 7 0;
#X connect 4 0 3 0;
#X connect 5 0 4 1;
#X connect 6 0 0 0;
#X connect 6 1 5 0;
#X connect 7 0 8 0;
#X connect 8 0 10 0;
#X connect 10 0 9 0;
#X restore 63 218 pd tabminmax-old;
#X msg 363 27 const 0;
#X obj 363 53 s \$0-clicks;
#N canvas 362 205 404 336 loopback-latency-meter 0;
#X obj 29 99 bng 50 250 50 0 \$0-do-latency-test empty empty 17 25
0 25 -203904 -262144 -1;
#X obj 31 208 bng 50 250 50 0 \$0-use-stored-latency empty empty 17
25 0 25 -203904 -262144 -1;
#X text 90 113 measure actual loopback latency;
#X text 27 21 Loopback latency value is automatically compensated \,
but not automatically calculated! You must create a loopback from (left
channel) output to input and click the button to measure loopback latency
time.;
#X text 29 168 Or if you are confident that loopback latency is the
same as last time you measured it:;
#X floatatom 33 296 5 0 0 0 - #0-latency -;
#X floatatom 146 297 5 0 0 0 - #0-latency-ms -;
#X text 70 297 samples;
#X text 185 297 milliseconds;
#X text 91 221 use last measured loopback latency value;
#X restore 18 346 pd loopback-latency-meter;
#X obj 155 20 r \$0-do-latency-test;
#X msg 18 300 \; pd-loopback-latency-meter vis 1;
#X msg 290 228 set \$1;
#X obj 299 251 r \$0-use-stored-latency;
#X obj 290 305 f;
#N canvas 0 22 167 228 samps-to-ms 0;
#X obj 18 22 inlet;
#X obj 18 173 outlet;
#X obj 33 82 samplerate~;
#X obj 18 135 /;
#X obj 33 107 / 1000;
#X obj 18 53 t f b;
#X connect 0 0 5 0;
#X connect 2 0 4 0;
#X connect 3 0 1 0;
#X connect 4 0 3 1;
#X connect 5 0 3 0;
#X connect 5 1 2 0;
#X restore 377 322 pd samps-to-ms;
#X obj 377 374 outlet;
#X obj 389 349 s \$0-latency-ms;
#X msg 290 278 0;
#X connect 0 0 23 0;
#X connect 1 0 2 0;
#X connect 5 0 11 0;
#X connect 6 0 7 0;
#X connect 8 0 13 0;
#X connect 11 0 12 0;
#X connect 11 1 12 1;
#X connect 12 0 4 0;
#X connect 13 1 15 0;
#X connect 14 0 13 0;
#X connect 15 0 16 0;
#X connect 15 1 17 0;
#X connect 15 1 24 0;
#X connect 15 1 26 0;
#X connect 19 0 20 0;
#X connect 22 0 1 0;
#X connect 22 0 4 0;
#X connect 22 0 8 0;
#X connect 24 0 30 0;
#X connect 25 0 30 0;
#X connect 26 0 10 0;
#X connect 26 0 27 0;
#X connect 26 0 9 0;
#X connect 27 0 28 0;
#X connect 27 0 29 0;
#X connect 30 0 26 0;
#X restore 195 71 pd latency-meter;
#X text 230 98 samples;
#N canvas 639 396 505 313 play-chirp 0;
#X obj 24 75 inlet;
#X obj 24 113 tabplay~ \$0-chirp;
#X obj 24 227 dac~ 1;
#N canvas 0 22 366 323 latency-compensation 0;
#X obj 76 30 r \$0-play-chirp;
#X obj 195 30 r \$0-chirp-response-size;
#X obj 205 232 r \$0-latency;
#X obj 37 175 for++;
#X obj 37 232 tabread \$0-chirp-response;
#X obj 37 281 tabwrite \$0-chirp-response;
#X obj 37 205 t f f;
#X obj 190 258 -;
#X obj 37 31 inlet;
#X obj 49 98 r \$0-latency;
#X floatatom 195 93 8 0 0 0 - - -;
#X obj 37 73 onebang;
#X obj 94 73 bng 15 250 50 0 empty empty empty 17 7 0 10 -262144 -1
-1;
#X obj 195 59 - 1;
#X obj 63 129 bng 15 250 50 0 empty empty empty 17 7 0 10 -262144 -1
-1;
#X obj 238 282 outlet;
#X connect 0 0 11 1;
#X connect 0 0 12 0;
#X connect 1 0 13 0;
#X connect 2 0 7 1;
#X connect 3 0 6 0;
#X connect 3 1 15 0;
#X connect 4 0 5 0;
#X connect 6 0 4 0;
#X connect 6 1 7 0;
#X connect 7 0 5 1;
#X connect 8 0 11 0;
#X connect 9 0 3 0;
#X connect 11 0 3 0;
#X connect 13 0 3 1;
#X connect 13 0 10 0;
#X connect 14 0 3 0;
#X restore 156 226 pd latency-compensation;
#X obj 156 130 delay 250;
#X text 164 252 shift signal in buffer to compensate for latency;
#X obj 156 278 outlet;
#X msg 175 159 const 0;
#X obj 175 189 s \$0-impulse-response;
#X text 233 161 clear IR;
#X obj 331 80 adc~ 1;
#X obj 331 208 tabwrite~ \$0-chirp-response;
#X obj 349 174 r \$0-play-chirp;
#X obj 331 141 *~ 1;
#X obj 352 111 r \$0-input-gain;
#X obj 24 192 *~ 1;
#X obj 45 162 r \$0-output-gain;
#X text 23 13 Play and record the chirp with the gain settings for
the test signal. Note that these gain settings are not global for Pd.
;
#X connect 0 0 1 0;
#X connect 1 0 15 0;
#X connect 1 1 4 0;
#X connect 3 0 6 0;
#X connect 4 0 3 0;
#X connect 4 0 7 0;
#X connect 7 0 8 0;
#X connect 10 0 13 0;
#X connect 12 0 11 0;
#X connect 13 0 11 0;
#X connect 14 0 13 1;
#X connect 15 0 2 0;
#X connect 16 0 15 1;
#X restore 523 449 pd play-chirp;
#N canvas 542 180 332 311 deciBel-meter 0;
#X obj 122 14 inlet;
#X obj 182 113 osc~ 1000;
#X obj 197 167 line~ 0 100;
#X obj 182 194 *~;
#X msg 197 141 \$1 100;
#X obj 182 276 dac~ 1;
#X obj 38 45 adc~ 1;
#X obj 122 91 tgl 15 0 empty empty empty 17 7 0 10 -262144 -1 -1 0
1;
#X obj 38 74 env~ 8192;
#X obj 38 223 outlet;
#X obj 38 101 change;
#X obj 182 15 inlet;
#X obj 182 49 sel 0 1;
#X msg 182 76 200;
#X msg 215 76 1000;
#X obj 38 130 - 97;
#X obj 38 161 spigot;
#X obj 122 177 sel 0;
#X msg 122 206 0;
#X obj 122 144 t f f;
#X obj 182 247 *~ 1;
#X obj 203 221 r \$0-output-gain;
#X floatatom 216 247 5 0 0 0 - - -;
#X connect 0 0 7 0;
#X connect 1 0 3 0;
#X connect 2 0 3 1;
#X connect 3 0 20 0;
#X connect 4 0 2 0;
#X connect 6 0 8 0;
#X connect 7 0 4 0;
#X connect 7 0 19 0;
#X connect 8 0 10 0;
#X connect 10 0 15 0;
#X connect 11 0 12 0;
#X connect 12 0 13 0;
#X connect 12 1 14 0;
#X connect 13 0 1 0;
#X connect 14 0 1 0;
#X connect 15 0 16 0;
#X connect 16 0 9 0;
#X connect 17 0 18 0;
#X connect 18 0 9 0;
#X connect 19 0 17 0;
#X connect 19 1 16 1;
#X connect 20 0 5 0;
#X connect 21 0 20 1;
#X connect 21 0 22 0;
#X restore 524 67 pd deciBel-meter;
#X floatatom 524 95 5 0 0 0 - - -;
#X obj 524 7 tgl 50 0 empty empty 4 18 25 0 25 -203904 -262144 -1 0
1;
#X obj 617 7 vradio 25 1 1 2 empty empty empty 0 -8 0 10 -203904 -260097
-1 0;
#X obj 237 301 hsl 241 25 -6 6 0 0 empty empty input-gain 8 12 0 10
-203904 -260097 -1 12000 0;
#X floatatom 246 335 4 0 0 0 - - -;
#X msg 195 214 0;
#X obj 523 475 bng 50 500 50 0 empty empty empty 17 7 0 10 -203904
-260097 -1;
#X text 584 492 done;
#X text 646 12 200 Hz test sine;
#X text 645 37 1000 Hz test sine;
#X obj 195 155 bng 50 250 50 1 empty empty 3 17 25 0 25 -203904 -262144
-1;
#X text 565 96 out >> in difference \, dB;
#X text 276 335 dB;
#N canvas 0 22 225 227 init-GUIs 0;
#X obj 32 161 s \$0-chirpname;
#X obj 32 37 loadbang;
#X msg 32 72 -;
#X obj 32 105 symbol;
#X obj 58 137 s \$0-fade-in-symbol;
#X connect 1 0 2 0;
#X connect 2 0 3 0;
#X connect 3 0 0 0;
#X connect 3 0 4 0;
#X restore 23 361 pd init-GUIs;
#X obj 526 211 hsl 241 25 0 12 0 0 \$0-response-tail empty expected-reverb-tail
8 12 0 10 -203904 -260097 -1 0 0;
#X floatatom 523 244 5 0 0 0 - - -;
#X text 562 244 seconds;
#X msg 23 490 \; pd-test-signal vis 1;
#N canvas 472 249 336 212 gain 0;
#X obj 151 14 adc~ 1;
#X obj 151 169 outlet~;
#X obj 214 13 inlet;
#X obj 151 130 *~ 1;
#X obj 214 62 dbtorms;
#X obj 214 37 + 100;
#X floatatom 226 91 5 0 0 0 - - -;
#X obj 214 117 s \$0-input-gain;
#X obj 20 14 inlet;
#X obj 20 63 dbtorms;
#X obj 20 38 + 100;
#X floatatom 32 92 5 0 0 0 - - -;
#X obj 20 117 s \$0-output-gain;
#X connect 0 0 3 0;
#X connect 2 0 5 0;
#X connect 3 0 1 0;
#X connect 4 0 6 0;
#X connect 4 0 3 1;
#X connect 4 0 7 0;
#X connect 5 0 4 0;
#X connect 8 0 10 0;
#X connect 9 0 11 0;
#X connect 9 0 12 0;
#X connect 10 0 9 0;
#X restore 195 334 pd gain;
#X obj 198 240 hsl 241 25 -6 6 0 0 empty empty output-gain 8 12 0 10
-203904 -260097 -1 12000 0;
#X floatatom 203 274 4 0 0 0 - - -;
#X text 234 275 dB;
#X obj 523 129 bng 50 250 50 1 empty empty 5 17 25 0 25 -203904 -262144
-1;
#X text 581 125 set expected reverb-tail;
#X obj 26 62 cnv 15 100 60 empty empty empty 20 12 0 14 -260097 -66577
0;
#N canvas 739 83 399 525 info/help 0;
#X text 30 313 Load an exponential chirp file with extension .xchirp
from disk. These files are generated by the tool expochirp-generator.pd.
;
#X text 29 372 Play the chirp to the system under test. The returning
signal from the input is recorded to a buffer named 'chirp-response'.
This buffer is larger than the chirp size \, to accomodate latency
and reverb tail. Set the expected / approximate reverb tail length
by hand.;
#X text 29 460 After applying the test signal \, compute the impulse
response with the button on the main window.;
#X text 30 227 DeciBel-meter for audio loopback check. There should
be no clipping of the signal.;
#X text 29 153 Output and input gain settings for the test signal.
Notice that these settings are independent from soundcard settings.
Input gain may be used to compensate gain loss in the analog domain.
;
#X text 32 17 Apply test signal. The signal is mono \, and uses the
left output and input channel.;
#X text 17 372 7;
#X text 17 313 6;
#X text 29 274 Set the expected reverb tail. The default setting is
0;
#X text 14 59 1;
#X text 31 59 Opens Pd's audio settings dialog. Set your audio interface
device here.;
#X text 15 97 2;
#X text 28 96 Perform a manual loopback latency test. This is important
if you want to have an IR with exact index position of the response.
The measured loopback latency will be compensated.;
#X text 15 152 3;
#X text 16 227 4;
#X text 15 273 5;
#X restore 37 84 pd info/help;
#X text 352 362 CPU intensive!;
#X obj 24 4 cnv 15 15 15 empty empty IRrecorder 2 14 0 25 -262144 -66577
0;
#X text 577 287 load chirp file (extension .xchirp);
#X text 26 35 subwindow;
#X obj 27 153 bng 50 250 50 0 empty empty 1 17 25 0 25 -203904 -262144
-1;
#X msg 27 216 \; pd audio-properties;
#X text 84 149 audio;
#X text 83 187 settings;
#X text 83 168 interface;
#X msg 523 187 0;
#X text 193 130 test-signal gain (left channel!);
#X text 581 414 (left channel!);
#X text 253 26 loopback latency meter;
#X floatatom 288 98 5 0 0 0 - - -;
#X text 325 99 milliseconds;
#X text 251 170 unity input / output gain;
#X connect 0 0 33 0;
#X connect 2 0 1 0;
#X connect 4 0 3 0;
#X connect 5 0 9 0;
#X connect 7 0 14 0;
#X connect 9 0 6 0;
#X connect 10 0 12 0;
#X connect 12 0 11 0;
#X connect 12 1 55 0;
#X connect 14 0 22 0;
#X connect 15 0 16 0;
#X connect 17 0 15 0;
#X connect 18 0 15 1;
#X connect 19 0 20 0;
#X connect 19 0 34 1;
#X connect 21 0 19 0;
#X connect 21 0 35 0;
#X connect 26 0 21 0;
#X connect 30 0 31 0;
#X connect 34 0 1 0;
#X connect 35 0 34 0;
#X connect 35 0 36 0;
#X connect 38 0 51 0;
#X connect 46 0 47 0;
#X connect 51 0 30 0;
#X restore 39 75 pd test-signal;
#X obj 659 14 cnv 15 100 50 empty empty empty 20 12 0 14 -260097 -66577
0;
#N canvas 646 48 410 446 info/help 0;
#X text 31 264 You can check the IR's spectral data \, which are computed
for the segment selected in the IR monitor. Notice that centered IR
segment and non-centered (causal) segment have different spectrum.
;
#X text 17 124 1;
#X text 16 191 2;
#X text 16 264 3;
#X obj 200 404 pddplink www.katjaas.nl;
#X text 32 15 This is a Pure Data patch for applying a test chirp to
a system \, computing the raw impulse response \, and checking the
spectral qualities of the IR.;
#X text 32 75 Convolution is done by [bsaylor/partconv~] \, which should
be in distributions of Pd extended.;
#X text 32 191 Compute the raw impulse response by deconvolution of
the chirp response. The impulse response is then shown in the graph
IRmonitor \, for which you can set horizontal and vertical zoom factors.
;
#X text 29 405 Katja Vetter march 2011;
#X text 30 339 The raw impulse response can be stored in a mono .wav
file (32 bit floating point format).;
#X text 34 124 Load a test chirp file which was created with the patch
expochirp-generator.pd. The file should have extension .xchirp. Apply
the test signal to the system under test.;
#X restore 670 31 pd info/help;
#X text 432 120 chirp size in seconds;
#X connect 2 0 40 0;
#X connect 14 0 30 0;
#X connect 15 0 17 0;
#X connect 16 0 24 0;
#X connect 30 0 1 0;

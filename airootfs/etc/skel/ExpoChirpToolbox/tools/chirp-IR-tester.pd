#N canvas 39 28 902 509 10;
#X obj 37 73 bng 50 250 50 0 empty empty load 8 25 0 12 -203904 -262144
-1;
#X floatatom 37 155 10 0 0 0 - - -;
#X symbolatom 240 24 30 0 0 0 - #0-IRname -;
#N canvas 579 208 536 471 load-IR 0;
#X obj 22 25 inlet;
#X obj 22 219 soundfiler;
#X obj 67 137 f \$0;
#X obj 67 112 loadbang;
#X floatatom 38 244 8 0 0 0 - - -;
#X obj 47 112 bng 15 250 50 0 empty empty empty 17 7 0 10 -262144 -1
-1;
#X obj 22 162 pack s f;
#X floatatom 80 163 5 0 0 0 - - -;
#X obj 22 429 outlet;
#X obj 22 55 openpanel;
#X msg 22 193 read -resize \$1 \$2-impulse-response;
#X obj 67 335 s \$0-IRsize;
#N canvas 223 221 248 171 IRname 0;
#X obj 35 31 inlet;
#X obj 35 61 hcs/split_path;
#X obj 116 124 s \$0-IRname;
#X msg 155 62 -;
#X obj 155 33 loadbang;
#X obj 155 94 symbol;
#X connect 0 0 1 0;
#X connect 1 1 2 0;
#X connect 3 0 5 0;
#X connect 4 0 3 0;
#X connect 5 0 2 0;
#X restore 36 82 pd IRname;
#X obj 269 178 tabminmax \$0-impulse-response;
#X floatatom 440 249 5 0 0 0 - - -;
#X obj 269 157 bng 15 250 50 0 empty empty empty 17 7 0 10 -262144
-1 -1;
#X floatatom 269 202 5 0 0 0 - - -;
#X obj 440 206 unpack;
#X floatatom 473 231 8 0 0 0 - - -;
#X obj 33 395 s \$0-IRloaded;
#X obj 381 20 loadbang;
#X msg 381 47 \; pd dsp 1;
#X symbolatom 134 114 60 0 0 0 - - -;
#X obj 133 81 symbol;
#X obj 133 26 inlet;
#X text 174 27 reload last IR;
#X text 60 25 load IR;
#N canvas 0 22 343 213 default-cuepoints 0;
#X obj 27 29 inlet;
#X obj 45 69 >> 1;
#X text 132 136 set cuepoints to default values;
#X obj 45 95 s \$0-set-time-zero;
#X obj 27 144 s \$0-set-time-N;
#X connect 0 0 1 0;
#X connect 0 0 4 0;
#X connect 1 0 3 0;
#X restore 50 364 pd default-cuepoints;
#N canvas 0 22 450 300 (subpatch) 0;
#X array \$0-impulse-response 874454 float 2;
#X coords 0 1 874454 -1 113 50 1;
#X restore 220 345 graph;
#N canvas 0 22 270 149 normalize 0;
#X obj 29 33 inlet;
#X obj 29 90 s \$0-impulse-response;
#X msg 29 61 normalize;
#X connect 0 0 2 0;
#X connect 2 0 1 0;
#X restore 84 301 pd normalize;
#X obj 33 269 t f f f b;
#X connect 0 0 9 0;
#X connect 1 0 4 0;
#X connect 1 0 8 0;
#X connect 1 0 30 0;
#X connect 2 0 6 1;
#X connect 2 0 7 0;
#X connect 3 0 2 0;
#X connect 5 0 2 0;
#X connect 6 0 10 0;
#X connect 9 0 6 0;
#X connect 9 0 12 0;
#X connect 9 0 23 1;
#X connect 9 0 22 0;
#X connect 10 0 1 0;
#X connect 13 0 16 0;
#X connect 13 1 17 0;
#X connect 15 0 13 0;
#X connect 17 0 14 0;
#X connect 17 1 18 0;
#X connect 20 0 21 0;
#X connect 23 0 6 0;
#X connect 24 0 23 0;
#X connect 30 0 19 0;
#X connect 30 1 27 0;
#X connect 30 2 11 0;
#X connect 30 3 29 0;
#X restore 37 132 pd load-IR;
#X text 102 155 samples;
#X text 222 144 1;
#X obj 240 151 cnv 15 300 75 empty empty empty 20 12 0 14 -233017 -66577
0;
#X text 223 210 0;
#N canvas 0 22 450 300 (subpatch) 0;
#X array \$0-IR-magnitude-spectrum 65537 float 2;
#X coords 0 2 65537 0 300 150 1;
#X restore 240 76 graph;
#X floatatom 508 231 5 0 0 0 - #0-freq3 -;
#X floatatom 240 231 3 0 1 0 - - -;
#X obj 239 343 cnv 15 300 75 empty empty empty 20 12 0 14 -233017 -66577
0;
#N canvas 0 22 450 300 (subpatch) 0;
#X array \$0-low-frequencies 256 float 0;
#X coords 0 2 255 0 300 150 1;
#X restore 239 268 graph;
#X text 224 405 0;
#X text 223 335 1;
#X text 223 287 A;
#X obj 565 342 cnv 15 300 75 empty empty empty 20 12 0 14 -233017 -66577
0;
#N canvas 0 22 450 300 (subpatch) 0;
#X array \$0-high-frequencies 2048 float 0;
#X coords 0 2 2047 0 300 150 1;
#X restore 565 268 graph;
#X floatatom 520 423 3 0 0 0 - #0-freq1d -;
#X floatatom 566 423 5 0 0 0 - #0-freq2 -;
#X floatatom 834 423 5 0 0 0 - #0-freq3 -;
#X floatatom 239 424 3 0 0 0 - - -;
#X text 681 425 Hz >> (linear);
#X symbolatom 36 207 15 0 0 0 - - -;
#X obj 147 208 bng 15 250 50 0 empty empty empty 17 7 0 10 -262144
-260097 -1;
#N canvas 66 64 657 314 compute-spectrum 0;
#N canvas 178 348 882 439 compute-spectrum 0;
#X msg 61 69 const 0;
#X obj 22 44 t b b b;
#X text 116 71 clear sum buffer;
#X msg 41 135 1;
#X obj 22 187 tabplay~ \$0-impulse-response;
#X msg 74 135 0;
#X obj 22 222 rfft~;
#N canvas 651 584 206 163 pyth~ 0;
#X obj 34 60 *~;
#X obj 34 29 inlet~;
#X obj 96 60 *~;
#X obj 96 29 inlet~;
#X obj 34 97 sqrt~;
#X obj 34 130 outlet~;
#X connect 0 0 4 0;
#X connect 1 0 0 0;
#X connect 1 0 0 1;
#X connect 2 0 4 0;
#X connect 3 0 2 0;
#X connect 3 0 2 1;
#X connect 4 0 5 0;
#X restore 22 256 pd pyth~;
#X obj 22 308 +~;
#X obj 240 338 outlet;
#X obj 252 270 symbol done;
#X obj 641 70 r \$0-spectrum-done;
#X msg 641 222 2;
#X obj 641 196 t b f;
#X obj 641 249 pow;
#X obj 641 121 t f f;
#X obj 187 214 s \$0-spectrum-done;
#X obj 261 314 symbol;
#X obj 261 292 loadbang;
#X obj 641 363 tabread \$0-IR-magnitude-sum;
#X obj 37 280 tabreceive~ \$0-IR-magnitude-sum;
#X obj 22 337 tabsend~ \$0-IR-magnitude-sum;
#X obj 262 17 table \$0-IR-magnitude-sum 1025;
#X obj 408 202 r \$0-spectrum-done;
#X obj 408 262 t f f;
#X obj 408 235 for++ 0 1024;
#X obj 408 295 tabread \$0-IR-magnitude-sum;
#X obj 408 330 tabwrite \$0-IR-magnitude-spectrum;
#X obj 61 92 s \$0-IR-magnitude-sum;
#X obj 408 88 samplerate~;
#X obj 408 60 loadbang;
#X obj 408 134 / 2048;
#X obj 408 162 s \$0-FFT-fundamental;
#X obj 489 105 / 2;
#X obj 489 133 s \$0-nyquist;
#X obj 22 17 r \$0-IRloaded;
#X obj 477 260 s \$0-magnitudes-done;
#X msg 132 146 set \$1;
#X obj 640 40 / 2;
#X obj 640 15 r \$0-fftsize;
#X obj 132 118 r \$0-fftsize;
#N canvas 0 22 261 351 fftsize 0;
#X obj 42 16 r \$0-fftsize-button;
#X obj 42 44 + 10;
#X obj 56 94 s \$0-log-fftsize;
#X obj 42 116 t f f;
#X obj 42 149 t b f;
#X msg 42 181 2;
#X obj 42 212 pow;
#X obj 42 271 /;
#X floatatom 42 297 5 0 0 0 - - -;
#X obj 53 240 s \$0-fftsize;
#X obj 20 324 outlet;
#X text 64 324 fftsize;
#X obj 92 43 + 9;
#X obj 92 68 s \$0-log-spectrumsize;
#X connect 0 0 1 0;
#X connect 0 0 12 0;
#X connect 1 0 3 0;
#X connect 1 0 2 0;
#X connect 3 0 4 0;
#X connect 3 1 7 1;
#X connect 4 0 5 0;
#X connect 4 1 6 1;
#X connect 5 0 6 0;
#X connect 6 0 7 0;
#X connect 6 0 9 0;
#X connect 6 0 10 0;
#X connect 7 0 8 0;
#X connect 12 0 13 0;
#X restore 263 61 pd fftsize;
#X floatatom 263 89 8 0 0 0 - - -;
#N canvas 636 168 264 350 resize-tables 0;
#X obj 38 42 r \$0-fftsize;
#X obj 38 75 / 2;
#X msg 65 178 resize \$1;
#X obj 38 108 + 1;
#X obj 65 253 s \$0-IR-magnitude-sum;
#X obj 82 227 s \$0-IR-magnitude-spectrum;
#X obj 38 144 t b f;
#X obj 38 298 s \$0-recompute-fft;
#X obj 95 203 s \$0-IR-log-freq-spectrum;
#X connect 0 0 1 0;
#X connect 1 0 3 0;
#X connect 2 0 4 0;
#X connect 2 0 5 0;
#X connect 2 0 8 0;
#X connect 3 0 6 0;
#X connect 6 0 7 0;
#X connect 6 1 2 0;
#X restore 457 17 pd resize-tables;
#X obj 240 243 symbol computing;
#X obj 641 392 tabwrite \$0-IR-log-freq-spectrum;
#X obj 616 71 bng 15 250 50 0 empty empty empty 17 7 0 10 -262144 -1
-1;
#X obj 4 18 bng 15 250 50 0 empty empty empty 17 7 0 10 -262144 -1
-1;
#X obj 641 275 - 1;
#X obj 641 333 + 32;
#X obj 641 171 * 11;
#X obj 641 304 * 32;
#X floatatom 685 319 5 0 0 0 - - -;
#X obj 41 163 switch~ 131072;
#X obj 641 146 / 65536;
#X obj 641 94 for++ 0 65536;
#X obj 685 287 / 2048;
#X text 734 288 2^11;
#X text 673 170 11 octaves in log freq spectrum;
#X connect 0 0 28 0;
#X connect 1 0 4 0;
#X connect 1 1 3 0;
#X connect 1 2 0 0;
#X connect 1 2 44 0;
#X connect 3 0 53 0;
#X connect 4 0 6 0;
#X connect 4 1 10 0;
#X connect 4 1 16 0;
#X connect 4 1 5 0;
#X connect 5 0 53 0;
#X connect 6 0 7 0;
#X connect 6 1 7 1;
#X connect 7 0 8 0;
#X connect 8 0 21 0;
#X connect 10 0 9 0;
#X connect 11 0 55 0;
#X connect 12 0 14 0;
#X connect 13 0 12 0;
#X connect 13 1 14 1;
#X connect 14 0 48 0;
#X connect 15 0 54 0;
#X connect 15 1 45 1;
#X connect 17 0 9 0;
#X connect 18 0 17 0;
#X connect 19 0 45 0;
#X connect 20 0 8 1;
#X connect 23 0 25 0;
#X connect 24 0 26 0;
#X connect 24 1 27 1;
#X connect 25 0 24 0;
#X connect 25 1 36 0;
#X connect 26 0 27 0;
#X connect 29 0 31 0;
#X connect 29 0 33 0;
#X connect 30 0 29 0;
#X connect 31 0 32 0;
#X connect 33 0 34 0;
#X connect 35 0 1 0;
#X connect 37 0 53 0;
#X connect 38 0 25 1;
#X connect 38 0 54 1;
#X connect 38 0 55 1;
#X connect 38 0 56 0;
#X connect 39 0 31 1;
#X connect 39 0 38 0;
#X connect 40 0 37 0;
#X connect 41 0 42 0;
#X connect 44 0 9 0;
#X connect 46 0 55 0;
#X connect 47 0 1 0;
#X connect 48 0 51 0;
#X connect 49 0 19 0;
#X connect 50 0 13 0;
#X connect 51 0 49 0;
#X connect 54 0 50 0;
#X connect 55 0 15 0;
#X connect 56 0 49 1;
#X connect 56 0 51 1;
#X connect 56 0 52 0;
#X restore 351 81 pd compute-spectrum;
#N canvas 752 38 418 291 magnitude-peak 0;
#X obj 30 55 tabminmax \$0-IR-magnitude-spectrum;
#X obj 231 82 unpack;
#X obj 232 246 outlet;
#X obj 294 56 samplerate~;
#X obj 279 246 outlet;
#X obj 294 30 loadbang;
#X obj 279 219 *;
#X obj 271 32 bng 15 250 50 0 empty empty empty 17 7 0 10 -262144 -1
-1;
#X floatatom 242 117 8 0 0 0 - - -;
#X obj 30 24 r \$0-magnitudes-done;
#X obj 294 172 / 1024;
#X obj 312 89 r \$0-fftsize;
#X obj 312 142 t b f;
#X obj 164 25 bng 15 250 50 0 empty empty empty 17 7 0 10 -262144 -1
-1;
#X connect 0 1 1 0;
#X connect 1 0 2 0;
#X connect 1 1 6 0;
#X connect 1 1 8 0;
#X connect 3 0 10 0;
#X connect 5 0 3 0;
#X connect 6 0 4 0;
#X connect 7 0 3 0;
#X connect 9 0 0 0;
#X connect 10 0 6 1;
#X connect 11 0 12 0;
#X connect 12 0 10 0;
#X connect 12 1 10 1;
#X connect 13 0 0 0;
#X restore 132 163 pd magnitude-peak;
#X floatatom 132 188 8 0 0 0 - - -;
#X floatatom 231 188 8 0 0 0 - - -;
#X text 228 206 frequency;
#X text 131 206 magnitude;
#X text 193 80 view lists;
#X obj 132 66 bng 50 250 50 0 empty empty empty 17 25 0 25 -203904
-262144 -1;
#N canvas 722 235 367 150 lists 0;
#X obj 152 122 s \$0-IR-magnitude-spectrum;
#X msg 27 40 arrayviewlistnew;
#X obj 164 97 s \$0-deciBels;
#X obj 27 14 inlet;
#X obj 153 31 r \$0-fftsize-button;
#X msg 152 55 arrayviewclose;
#X text 243 55 prevent freeze;
#X connect 1 0 0 0;
#X connect 1 0 2 0;
#X connect 3 0 1 0;
#X connect 4 0 5 0;
#X connect 5 0 2 0;
#X connect 5 0 0 0;
#X restore 132 126 pd lists;
#X obj 351 272 outlet;
#X obj 51 54 vradio 30 1 1 8 \$0-fftsize-button empty empty 0 -8 0
10 -262144 -260097 -1 7;
#X text 18 59 1024;
#X text 17 89 2048;
#X text 15 119 4096;
#X text 13 150 8192;
#X text 8 181 16384;
#X text 10 212 32768;
#X text 9 240 65536;
#X text 4 271 131072;
#X text 24 26 fft size;
#X symbolatom 359 109 11 0 0 0 - - -;
#N canvas 257 22 887 415 spectrum-zoom 0;
#X obj 30 230 tabread \$0-IR-magnitude-spectrum;
#X obj 30 200 t f f;
#X obj 30 171 for++;
#X obj 43 118 - 1;
#X floatatom 53 145 8 0 0 0 - - -;
#X msg 106 111 resize \$1;
#X obj 284 229 tabread \$0-IR-magnitude-spectrum;
#X obj 284 178 t f f;
#X obj 284 204 +;
#X obj 284 149 for++;
#X obj 297 93 - 1;
#X floatatom 336 122 8 0 0 0 - - -;
#X obj 328 65 / 2;
#X obj 328 38 t f f;
#X obj 328 93 -;
#X obj 328 149 + 1;
#X obj 355 65 / 64;
#X msg 403 128 resize \$1;
#X obj 43 67 r \$0-fftsize;
#X obj 328 13 r \$0-fftsize;
#X obj 30 42 r \$0-magnitudes-done;
#X obj 31 255 tabwrite \$0-low-frequencies;
#X obj 106 141 s \$0-low-frequencies;
#X obj 284 257 tabwrite \$0-high-frequencies;
#X obj 403 158 s \$0-high-frequencies;
#X obj 43 94 / 512;
#X obj 609 43 samplerate~;
#X obj 609 152 / 512;
#X obj 611 15 loadbang;
#X obj 586 18 bng 15 250 50 0 empty empty empty 17 7 0 10 -262144 -1
-1;
#X floatatom 628 178 5 0 0 0 - - -;
#X obj 693 98 / 2;
#X obj 729 97 / 64;
#X obj 693 62 t f f;
#X floatatom 691 147 5 0 0 0 - - -;
#X floatatom 733 147 5 0 0 0 - - -;
#X obj 708 197 -;
#X floatatom 707 250 5 0 0 0 - - -;
#X obj 706 229 int;
#X obj 760 262 s \$0-freq2;
#X obj 735 189 s \$0-freq3;
#X obj 617 125 s \$0-freq4;
#X obj 618 75 / 4096;
#X obj 607 255 >> 1;
#X obj 621 221 s \$0-freq1d;
#X obj 622 200 int;
#X obj 553 308 >> 2;
#X obj 618 102 int;
#X obj 553 366 s \$0-freq1a;
#X obj 648 294 s \$0-freq1b;
#X obj 635 346 * 3;
#X obj 635 366 s \$0-freq1c;
#X connect 0 0 21 0;
#X connect 1 0 0 0;
#X connect 1 1 21 1;
#X connect 2 0 1 0;
#X connect 3 0 2 1;
#X connect 3 0 4 0;
#X connect 5 0 22 0;
#X connect 6 0 23 0;
#X connect 7 0 8 0;
#X connect 7 1 23 1;
#X connect 8 0 6 0;
#X connect 9 0 7 0;
#X connect 10 0 9 1;
#X connect 12 0 14 0;
#X connect 13 0 12 0;
#X connect 13 1 16 0;
#X connect 14 0 11 0;
#X connect 14 0 15 0;
#X connect 15 0 8 1;
#X connect 16 0 10 0;
#X connect 16 0 14 1;
#X connect 16 0 17 0;
#X connect 17 0 24 0;
#X connect 18 0 25 0;
#X connect 19 0 13 0;
#X connect 20 0 2 0;
#X connect 20 0 9 0;
#X connect 25 0 3 0;
#X connect 25 0 5 0;
#X connect 26 0 27 0;
#X connect 26 0 33 0;
#X connect 26 0 42 0;
#X connect 27 0 30 0;
#X connect 27 0 43 0;
#X connect 27 0 45 0;
#X connect 27 0 46 0;
#X connect 28 0 26 0;
#X connect 29 0 26 0;
#X connect 31 0 34 0;
#X connect 31 0 36 0;
#X connect 31 0 40 0;
#X connect 32 0 35 0;
#X connect 32 0 36 1;
#X connect 33 0 31 0;
#X connect 33 1 32 0;
#X connect 36 0 38 0;
#X connect 38 0 37 0;
#X connect 38 0 39 0;
#X connect 42 0 47 0;
#X connect 43 0 49 0;
#X connect 45 0 44 0;
#X connect 46 0 48 0;
#X connect 46 0 50 0;
#X connect 47 0 41 0;
#X connect 50 0 51 0;
#X restore 352 55 pd spectrum-zoom;
#X symbolatom 134 28 30 0 0 0 - #0-IRname -;
#X obj 450 243 metro 500;
#X msg 450 211 1;
#X msg 502 211 0;
#X obj 450 273 outlet;
#X obj 450 154 makesymbol;
#X obj 450 184 sel computing done;
#X connect 0 0 9 0;
#X connect 0 0 20 0;
#X connect 0 0 27 0;
#X connect 1 0 2 0;
#X connect 1 1 3 0;
#X connect 7 0 8 0;
#X connect 23 0 26 0;
#X connect 24 0 23 0;
#X connect 25 0 23 0;
#X connect 27 0 28 0;
#X connect 28 0 24 0;
#X connect 28 1 25 0;
#X restore 36 182 pd compute-spectrum;
#X text 222 95 A;
#X obj 566 151 cnv 15 300 75 empty empty empty 20 12 0 14 -233017 -66577
0;
#N canvas 0 22 450 300 (subpatch) 0;
#X array \$0-IR-log-freq-spectrum 65537 float 2;
#X coords 0 2 65537 0 300 150 1;
#X restore 566 76 graph;
#X floatatom 834 231 5 0 0 0 - #0-freq3 -;
#X floatatom 566 231 3 0 1 0 - #0-freq4 -;
#X text 338 232 Hz >> (linear);
#X text 675 230 Hz >> (log);
#X text 23 357 self-IR (deconvolved chirp);
#X text 23 334 patch for testing a chirp;
#X obj 389 268 cnv 2 2 150 empty empty empty 20 12 0 14 -191407 -66577
0;
#X obj 466 268 cnv 2 2 150 empty empty empty 20 12 0 14 -191407 -66577
0;
#X obj 313 268 cnv 2 2 150 empty empty empty 20 12 0 14 -191407 -66577
0;
#X floatatom 307 424 3 0 0 0 - #0-freq1a -;
#X floatatom 382 424 3 0 0 0 - #0-freq1b -;
#X text 272 426 Hz;
#X floatatom 462 424 3 0 0 0 - #0-freq1c -;
#X connect 0 0 3 0;
#X connect 3 0 1 0;
#X connect 25 0 23 0;
#X connect 25 1 24 0;
